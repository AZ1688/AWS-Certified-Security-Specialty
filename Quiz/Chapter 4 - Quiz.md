## Which of the following options are available when you are configuring a Web ACL in AWS WAF?

```
>> Block
>> Count
>> Allow
Pending
Quarantine
Hold
```

Block, Allow and Count are available actions for Web ACLs in AWS WAF. If you want to test a rule before you start using it to allow or block requests, you can configure AWS WAF to count the web requests that match the conditions in the rule.

## Which of the following are valid key rotation options for a customer managed CMK that was generated in KMS?

```
You can choose to automatically rotate the CMK once every three years
You can automatically rotate the keys using your own schedule
>> You can choose to automatically rotate the CMK once per year
You can choose to automatically rotate the CMK once every three months
```

You can choose to have AWS KMS automatically rotate CMKs every year, provided that those keys were generated by AWS KMS. Please do read the KMS FAQ before you sit the exam!

## Which of the following are valid key rotation options for an AWS managed CMK?

```
You can choose to automatically rotate the CMK once per year
>> The key is automatically rotated every three years and this configuration cannot be changed
You can rotate the key manually according to your own schedule
You can choose to rotate the key automatically according to a schedule that you define
```

You cannot enable or disable rotation of AWS managed keys. They are automatically rotated every three years. Manual rotation is not supported for AWS managed keys.

## What is a Policy Condition used for in a Key Policy or IAM Policy?

```
>> It allows you to specify conditions for when a policy is in effect
It allows you to define conditions which must be met in order to enable access to AWS resources
It allows you to set properties within the policy based on a condition
It allows you to reference other IAM policies according to whether the condition is true or not
```

The Condition element (or Condition block) lets you specify conditions for when a policy is in effect. The policy statement is effective only when the conditions are true. For example, you might want a policy statement to take effect only after a specific date. Or, you might want a policy statement to control access only when a specific value appears in an API request.

## Last year, you encrypted a number of files using a CMK that you manage, you now need to access the files. However one of your administrators now tells you that they thought that the CMK was no longer in use so they scheduled it for deletion over a month ago and the key has now been deleted from your account. What can you do to resolve this and get access to your files?

```
Ask AWS to restore your CMK from backup
Create a new CMK, re-encrypt, then decrypt the data with the new CMK
Undelete the CMK
>> After deleting the CMK, your data is unrecoverable, you will not be able to access the files.
```

Deleting a customer master key (CMK) in AWS Key Management Service (AWS KMS) is destructive and potentially dangerous. It deletes the key material and all metadata associated with the CMK and is irreversible. After a CMK is deleted, you can no longer decrypt the data that was encrypted under that CMK, which means that data becomes unrecoverable.

## You are running a website on EC2 instances behind an application load balancer. You would like to block any request which come from the following IP address range: 86.130.105.0/24 which you have identified as malicious. Which of the following approaches could you use to block requests from this IP range?

```
Use Security Group to block all requests coming from the IP address range
>> Use an AWS WAF Web ACL to block all requests coming from the IP address range
Use an S3 bucket policy to block requests coming from the IP address range
>> Use a Network ACL to block all requests coming from the IP address range
```

As well as using a Network ACL, you can also use AWS WAF to block attacks from known malicious IP address ranges.

## You would like to limit the use of a KMS CMK to requests which originate from S3 only, how would you configure this?

```
Use the kms:ViaService Condition Key in the S3 Bucket Policy
Use the kms:ViaService Condition Key in the KMS ACL
>> Use the kms:ViaService Condition Key in the Key Policy
Use the kms:ViaService Condition Key in the IAM Policy
```

The __kms:ViaService__ condition key can be used to limit the use of an AWS KMS customer master key (CMK) to requests from specified AWS services. You can specify one or more services in each kms:ViaService condition key.

## Which of the following services can you use to block common web exploits like SQL injection and cross-site scripting?

```
>> AWS WAF
Network ACLs and Security Groups
AWS Shield
AWS Guard Duty
```

Explanation
* AWS WAF is a web application firewall that helps protect web applications from attacks by allowing you to configure rules that allow, block, or monitor web requests based on conditions that you define, including IP addresses, HTTP headers, SQL injection and cross-site scripting.
* AWS Shield is a managed service that provides protection against Distributed Denial of Service attacks
* Security groups in a VPC specify which traffic is allowed to or from an EC2 instance.
* Network ACLs operate at the subnet level and evaluate traffic entering and exiting a subnet.
* Amazon GuardDuty offers threat detection that enables you to continuously monitor your AWS accounts using integrated threat intelligence such as known malicious IPs, anomaly detection, and machine learning.

## Under which circumstances would you use a KMS Grant to configure access for a user instead of a Key Policy?

```
For federated access
For cross-account access
>> For temporary access
For static permissions which do not change
```

With grants you can programmatically delegate the use of KMS customer master keys (CMKs) to other AWS principals. Grants are typically used to provide __temporary permissions__ or more __granular permissions__.

## You would like to temporarily delegate the use of your KMS CMK to another user, which of the following options is the best way to approach this?

```
Update the IAM policy associated with the user
>> Use a grant
Update the key policy to allow the user access to use the CMK
Share the key with the user
```

With grants you can programmatically delegate the use of KMS customer master keys (CMKs) to other AWS principals. Grants are typically used to provide __temporary permissions__ or more __granular permissions__.

## Which of the following are advantages of importing your own key material into to a CMK?

```
You can use KMS to automatically rotate the keys according to a schedule that you define
To store multiple versions of the key material in the same CMK
>> You can use key material from your own infrastructure which meets your own requirements
>> You can manually delete the key any time you want without waiting 7-30 days
```

You cannot configure automatic rotation for CMKs which use imported key material. When you import key material into a CMK, the CMK is permanently associated with that key material. You can reimport the same key material, but you cannot import different key material into that CMK.

## Which of the following are valid key rotation options for a CMK which uses imported key material which was generated outside of AWS?

```
You can choose to automatically rotate the CMK three times per year
>> You can rotate the key manually according to your own schedule
You can choose to automatically rotate the CMK once per year
You can choose to automatically rotate the CMK once every three months
```

Automatic key rotation is __not available for CMKs using imported key material__. Instead, you must rotate the key manually.

## You have created a customer managed CMK in us-east-1 region and would like to use it to encrypt data located in eu-west-1, how can you achieve this?

```
>> This is not possible, a CMK can only be used in the region in which it was created
KMS is a global service, so default you will be able to use the CMK in any region
Export the key material and import it into a new CMK that you have created in eu-west-1
Import the key to eu-west-1 in order to use it in that region
```

Keys generated by AWS KMS are __only stored and used in the region in which they were created__. They cannot be transferred to another region.
